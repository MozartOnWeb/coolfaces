import { Metadata } from "next";

//import components
import { Typeface } from "@/components/typeface/typeface";
import { Pagination } from "@/components/pagination/pagination";

//import lib functions
import { replaceSpecialCharacters } from "@/lib/replaceSpecialCharacters";

//import fetch data
import { getCategoryTypefaces } from "@/sanity/fetch";

//import types
import { Typeface as TypefaceTypes } from "@/typings";

//generate metadata
export async function generateMetadata({
  params,
}: {
  params: { slug: string };
}): Promise<Metadata> {
  const typeface: TypefaceTypes = await getCategoryTypefaces({
    category: params.slug,
  });

  const { name } = typeface;

  return {
    title: name,
  };
}

export default async function Page({ params }: { params: { slug: string } }) {
  const typefaces: TypefaceTypes[] = await getCategoryTypefaces({
    category: params.slug,
  });

  return (
    <main className="container">
      <h1>{replaceSpecialCharacters(params.slug)} typefaces</h1>

      <section className="typefaces-container">
        {typefaces.length > 0 ? (
          typefaces.map((typeface) => (
            <Typeface
              key={typeface.name}
              slug={typeface.slug}
              alt={typeface.name}
              background={typeface.background}
              icon={typeface.icon}
              categories={typeface.categories}
              license={typeface.license[0].name}
              name={typeface.name}
              styles={typeface.styles}
            />
          ))
        ) : (
          <div className="no-typefaces">
            <svg
              width="649"
              height="68"
              viewBox="0 0 649 68"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M0 66.64V1.36H11.0443L41.2804 47.3733V1.36H52.3247V66.64H41.2804L11.0443 20.6267V66.64H0Z"
                fill="white"
              />
              <path
                d="M92.5435 68C86.0256 68 80.4431 66.5796 75.796 63.7387C71.1489 60.8676 67.5731 56.8782 65.0685 51.7707C62.5941 46.6631 61.3569 40.7396 61.3569 34C61.3569 27.2604 62.5941 21.3369 65.0685 16.2293C67.5731 11.1218 71.1489 7.14755 75.796 4.30666C80.4431 1.43555 86.0256 0 92.5435 0C99.0615 0 104.644 1.43555 109.291 4.30666C113.968 7.14755 117.544 11.1218 120.019 16.2293C122.523 21.3369 123.775 27.2604 123.775 34C123.775 40.7396 122.523 46.6631 120.019 51.7707C117.544 56.8782 113.968 60.8676 109.291 63.7387C104.644 66.5796 99.0615 68 92.5435 68ZM92.5435 57.7093C96.919 57.7396 100.555 56.7724 103.452 54.808C106.379 52.8436 108.567 50.0782 110.015 46.512C111.494 42.9458 112.233 38.7751 112.233 34C112.233 29.2249 111.494 25.0844 110.015 21.5787C108.567 18.0427 106.379 15.2924 103.452 13.328C100.555 11.3636 96.919 10.3511 92.5435 10.2907C88.1681 10.2604 84.5319 11.2276 81.635 13.192C78.7381 15.1564 76.5504 17.9218 75.0718 21.488C73.6234 25.0542 72.8991 29.2249 72.8991 34C72.8991 38.7751 73.6234 42.9307 75.0718 46.4667C76.5202 49.9724 78.6929 52.7076 81.5897 54.672C84.5168 56.6364 88.1681 57.6489 92.5435 57.7093Z"
                fill="white"
              />
              <path
                d="M166.569 66.64V11.6053H145.476V1.36H198.571V11.6053H177.478V66.64H166.569Z"
                fill="white"
              />
              <path
                d="M224.391 66.64V39.8933L202.212 1.36H214.931L229.913 27.3813L244.85 1.36H257.569L235.435 39.8933V66.64H224.391Z"
                fill="white"
              />
              <path
                d="M263.89 66.64V1.36H290.822C291.456 1.36 292.271 1.39022 293.266 1.45066C294.262 1.48089 295.183 1.57156 296.027 1.72267C299.799 2.29689 302.907 3.55111 305.352 5.48533C307.826 7.41955 309.652 9.86755 310.829 12.8293C312.036 15.7609 312.639 19.0249 312.639 22.6213C312.639 26.1876 312.036 29.4516 310.829 32.4133C309.622 35.3449 307.781 37.7778 305.306 39.712C302.862 41.6462 299.769 42.9004 296.027 43.4747C295.183 43.5956 294.247 43.6862 293.221 43.7467C292.225 43.8071 291.426 43.8373 290.822 43.8373H274.799V66.64H263.89ZM274.799 33.6373H290.369C290.973 33.6373 291.652 33.6071 292.406 33.5467C293.161 33.4862 293.855 33.3653 294.488 33.184C296.299 32.7307 297.717 31.9298 298.743 30.7813C299.799 29.6329 300.539 28.3333 300.961 26.8827C301.414 25.432 301.64 24.0116 301.64 22.6213C301.64 21.2311 301.414 19.8107 300.961 18.36C300.539 16.8791 299.799 15.5644 298.743 14.416C297.717 13.2676 296.299 12.4667 294.488 12.0133C293.855 11.832 293.161 11.7262 292.406 11.696C291.652 11.6356 290.973 11.6053 290.369 11.6053H274.799V33.6373Z"
                fill="white"
              />
              <path
                d="M321.707 66.64V1.36H363.803V11.6053H332.616V27.6987H358.371V37.944H332.616V56.3947H363.803V66.64H321.707Z"
                fill="white"
              />
              <path
                d="M374.662 66.64V1.36H413.906V12.2853H385.571V28.56H408.474V39.44H385.571V66.64H374.662Z"
                fill="white"
              />
              <path
                d="M416.637 66.64L437.187 1.36H453.165L473.715 66.64H462.489L443.841 8.06933H446.285L427.863 66.64H416.637ZM428.089 52.496V42.296H462.308V52.496H428.089Z"
                fill="white"
              />
              <path
                d="M507.696 68C501.178 68 495.595 66.5796 490.948 63.7387C486.301 60.8676 482.725 56.8782 480.221 51.7707C477.746 46.6631 476.509 40.7396 476.509 34C476.509 27.2604 477.746 21.3369 480.221 16.2293C482.725 11.1218 486.301 7.14755 490.948 4.30666C495.595 1.43555 501.178 0 507.696 0C515.209 0 521.471 1.88889 526.48 5.66667C531.489 9.41422 535.005 14.4764 537.026 20.8533L526.027 23.8907C524.76 19.6293 522.602 16.3049 519.555 13.9173C516.507 11.4996 512.554 10.2907 507.696 10.2907C503.32 10.2907 499.669 11.2729 496.742 13.2373C493.845 15.2018 491.657 17.9671 490.179 21.5333C488.73 25.0693 487.991 29.2249 487.961 34C487.961 38.7751 488.685 42.9458 490.133 46.512C491.612 50.048 493.815 52.7982 496.742 54.7627C499.669 56.7271 503.32 57.7093 507.696 57.7093C512.554 57.7093 516.507 56.5004 519.555 54.0827C522.602 51.6649 524.76 48.3404 526.027 44.1093L537.026 47.1467C535.005 53.5236 531.489 58.6009 526.48 62.3787C521.471 66.1262 515.209 68 507.696 68Z"
                fill="white"
              />
              <path
                d="M546.965 66.64V1.36H589.06V11.6053H557.873V27.6987H583.628V37.944H557.873V56.3947H589.06V66.64H546.965Z"
                fill="white"
              />
              <path
                d="M623.426 68C618.658 68 614.358 67.1689 610.526 65.5067C606.724 63.8444 603.586 61.472 601.111 58.3893C598.667 55.2764 597.113 51.5893 596.449 47.328L607.765 45.6053C608.73 49.4738 610.707 52.4658 613.694 54.5813C616.712 56.6969 620.182 57.7547 624.105 57.7547C626.429 57.7547 628.616 57.392 630.668 56.6667C632.72 55.9413 634.38 54.8836 635.647 53.4933C636.945 52.1031 637.594 50.3956 637.594 48.3707C637.594 47.464 637.443 46.6329 637.141 45.8773C636.839 45.0916 636.387 44.3964 635.783 43.792C635.21 43.1876 634.455 42.6436 633.52 42.16C632.615 41.6462 631.558 41.208 630.351 40.8453L613.513 35.8587C612.065 35.4356 610.496 34.8764 608.806 34.1813C607.146 33.456 605.562 32.4738 604.053 31.2347C602.575 29.9653 601.352 28.3636 600.387 26.4293C599.451 24.4649 598.984 22.0471 598.984 19.176C598.984 14.9751 600.04 11.4542 602.152 8.61333C604.295 5.74222 607.161 3.59644 610.752 2.176C614.373 0.755553 618.387 0.0604419 622.792 0.0906655C627.258 0.120886 631.242 0.891552 634.742 2.40267C638.242 3.88356 641.169 6.04444 643.523 8.88533C645.877 11.7262 647.536 15.1564 648.502 19.176L636.779 21.216C636.296 18.9191 635.361 16.9698 633.972 15.368C632.615 13.736 630.94 12.4969 628.948 11.6507C626.987 10.8044 624.89 10.3511 622.657 10.2907C620.484 10.2604 618.462 10.5929 616.591 11.288C614.751 11.9529 613.257 12.92 612.11 14.1893C610.994 15.4587 610.435 16.9396 610.435 18.632C610.435 20.2338 610.918 21.5484 611.884 22.576C612.849 23.5733 614.041 24.3742 615.46 24.9787C616.908 25.5529 618.372 26.0364 619.85 26.4293L631.528 29.6933C633.128 30.1164 634.923 30.6907 636.915 31.416C638.906 32.1413 640.822 33.1538 642.663 34.4533C644.504 35.7529 646.013 37.4604 647.189 39.576C648.396 41.6916 649 44.3813 649 47.6453C649 51.0302 648.291 54.0071 646.873 56.576C645.485 59.1147 643.599 61.2302 641.215 62.9227C638.831 64.6151 636.1 65.8844 633.022 66.7307C629.974 67.5769 626.776 68 623.426 68Z"
                fill="white"
              />
            </svg>
          </div>
        )}
      </section>

      {typefaces.length > 0 ? <Pagination /> : null}
    </main>
  );
}
